DROP TABLE IF EXISTS Order_Product;
DROP TABLE IF EXISTS OrderTable;
DROP TABLE IF EXISTS Product CASCADE;
DROP TABLE IF EXISTS Customer CASCADE;

-- "Клиент"
CREATE TABLE Customer (
    CustomerID SERIAL PRIMARY KEY,
    Name TEXT NOT NULL,
    Email TEXT NOT NULL UNIQUE
);

-- "Заказ"
CREATE TABLE OrderTable (
    OrderID SERIAL PRIMARY KEY,
    OrderDate TEXT NOT NULL,  
    CustomerID INTEGER NOT NULL,
    FOREIGN KEY (CustomerID) REFERENCES Customer(CustomerID)
);

-- "Товар" 
CREATE TABLE Product (
    ProductID SERIALPRIMARY KEY,
    Name TEXT NOT NULL,
    Price REAL NOT NULL 
);

-- Связующая таблица M:N между "Заказ" и "Товар"
CREATE TABLE Order_Product (
    OrderID INTEGER NOT NULL,
    ProductID INTEGER NOT NULL,
    Quantity INTEGER NOT NULL,
    PRIMARY KEY (OrderID, ProductID),
    FOREIGN KEY (OrderID) REFERENCES OrderTable(OrderID),
    FOREIGN KEY (ProductID) REFERENCES Product(ProductID)
);


