-- Создание таблиц 
CREATE TABLE Students (
    student_id SERIAL PRIMARY KEY, 
    full_name VARCHAR(255) NOT NULL, 
    email VARCHAR(255) UNIQUE NOT NULL, 
    start_year INT -- Год поступления студента
);

CREATE TABLE Courses (
    course_id SERIAL PRIMARY KEY,
    course_name VARCHAR(255) NOT NULL,
    credits INT CHECK (credits > 0) -
);

CREATE TABLE Enrollments (
    student_id INT REFERENCES Students(student_id) ON DELETE CASCADE, 
    course_id INT REFERENCES Courses(course_id) ON DELETE CASCADE,
    grade CHAR(1), 
    PRIMARY KEY (student_id, course_id)
);

-- Задание 1: INSERT

-- 1.1 Добавление студентов
INSERT INTO Students (full_name, email, start_year) VALUES
('Алексей Смирнов', 'alexey.smirnov@example.com', 2021),
('Елена Кузнецова', 'elena.kuznetsova@example.com', 2022),
('Дмитрий Новиков', 'dmitry.novikov@example.com', 2021),
('Ольга Морозова', 'olga.morozova@example.com', 2023);

-- 1.2 Добавление курсов
INSERT INTO Courses (course_name, credits) VALUES
('Введение в программирование', 5),
('Базы данных', 4),
('Веб-технологии', 4);

-- 1.3 Запись студентов на курсы
INSERT INTO Enrollments (student_id, course_id, grade) VALUES (1, 2, 'A');

INSERT INTO Enrollments (student_id, course_id, grade) VALUES (2, 2, 'B');

INSERT INTO Enrollments (student_id, course_id, grade) VALUES (2, 3, 'A');

INSERT INTO Enrollments (student_id, course_id) VALUES (3, 1);
INSERT INTO Enrollments (student_id, course_id) VALUES (3, 2);
INSERT INTO Enrollments (student_id, course_id) VALUES (3, 3);

-- Задание 2: UPDATE

-- 2.1 Изменение email Елены Кузнецовой
UPDATE Students SET email = 'elena.kuznetsova@newmail.com' WHERE student_id = 2;

-- 2.2 Проставление оценки Дмитрию Новикову за 'Введение в программирование' (course_id=1)
UPDATE Enrollments SET grade = 'A' WHERE student_id = 3 AND course_id = 1;

-- Задание 3: Удаление данных (DELETE)
